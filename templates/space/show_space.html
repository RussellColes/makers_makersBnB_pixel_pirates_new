<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Space</title>
</head>

<body>
    <h1>Space</h1>
    <p class="t-title">Space: {{space.title}}</p>
    <p class="t-location">Location: {{space.location}}</p>
    <p class="t-headline_description">Headline_Description: {{space.headline_description}}</p>
    <p class="t-description">Description: {{space.description}}</p>
    <p class="t-price_per_night">Price Per Night: {{space.price_per_night}}</p>
    <p class="t-user_id">Owner: {{space.user_id}}</p>
    <!-- new code here -->
    <h3>Available Dates</h3>
    {% if availability %}
        <ul>
            {% for item in availability %}
                <li>{{ item.date }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No available dates for this space.</p>
    {% endif %}

    <h4>Request a booking</h4>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Booking Request</title>
        <script>
            // This function will check if the start date is earlier than or equal to the end date
            function validateDates() {
                const startDate = document.getElementById('start_date').value;
                const endDate = document.getElementById('end_date').value;
    
                // If the end date is earlier than the start date, show an error message
                if (startDate > endDate) {
                    alert("Start date must be before or equal to end date.");
                    return false; // Prevent form submission
                }
    
                // If validation passes, return true to submit the form
                return true;
            }
        </script>
    </head>
    <form action="/spaces/{{ space.id }}", method="post" onsubmit="return validateDates()">
    <p>
        <label for="start_date">Start Date</label>
        <select name="start_date" id="start_date" required>
            {% for availability in availability %}
                <option value="{{ availability.date }}">{{ availability.date }}</option>
            {% endfor %}
        </select>
    </p>

    <p>
        <label for="end_date">End Date</label>
        <select name="end_date" id="end_date" required>
            {% for availability in availability %}
                <option value="{{ availability.date }}">{{ availability.date }}</option>
            {% endfor %}
        </select>
    </p>
    <input type="submit" value="Submit">
    <p>
    </form>
    <a href="/spaces">Go back to all spaces</a>
    </p>
</body>
</html>